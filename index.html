<script type="module">
  // Load the Observable Runtime.
  import { Runtime } from "https://unpkg.com/@observablehq/notebook-runtime?module";
  
  const getUrlParams = () => {
    var params = {};
    window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, (m, key, value) => params[key] = value);
    return params;
  }
  
  const urlParams = getUrlParams();
  const getUrlParam = (name, defaultValue) => urlParams[name] || defaultValue;

  // Import the notebook.
  import notebook from `https://api.observablehq.com/${getUrlParam('name', '@trebor')}/${getUrlParam('notebook', 'portfolio')}.js`;

  // Load the notebook, and render any cells which start with "rendered_".
  Runtime.load(notebook, (cell) => {
    if (cell.name && cell.name.startsWith('rendered_')) {
      return {
        fulfilled: (value) => {
          if (value instanceof HTMLElement) {
            document.body.appendChild(value);
          }
        }
      };
    }
  });
</script>
